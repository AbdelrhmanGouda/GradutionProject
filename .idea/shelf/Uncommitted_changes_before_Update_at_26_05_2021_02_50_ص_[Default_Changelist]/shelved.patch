Index: app/src/main/java/com/example/graduationproject/Fragments/FriendProfileFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\npackage com.example.graduationproject.Fragments;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.Menu;\r\nimport android.view.MenuInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.graduationproject.Data.FriendListData;\r\n/*import com.example.graduationproject.Notification.APIService;\r\nimport com.example.graduationproject.Notification.Client;\r\nimport com.example.graduationproject.Notification.Data;\r\nimport com.example.graduationproject.Notification.MyResponse;\r\nimport com.example.graduationproject.Notification.NotificationSender;\r\nimport com.example.graduationproject.Notification.Token;*/\r\nimport com.example.graduationproject.R;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\n//import com.google.firebase.iid.FirebaseInstanceId;\r\nimport com.squareup.picasso.Picasso;\r\n\r\n/*\r\nimport retrofit2.Call;\r\nimport retrofit2.Callback;\r\nimport retrofit2.Response;\r\n*/\r\n\r\npublic class FriendProfileFragment extends Fragment {\r\n    private static final String TAG =\"gouda\" ;\r\n    TextView name,loveNumbers,friendNumbers,location,bio;\r\n    ImageView profile,addLove,addFriend;\r\n    boolean flag=true,flag2=true;\r\n    LinearLayout linearLove,linearAdd;\r\n    String id,appreciateNumber,friendsNumber,uName,uri;\r\n    FirebaseUser firebaseUser;\r\n    String  userName,userImage,myName,myImage;\r\n    DatabaseReference profileRefrence;\r\n\r\n    Boolean loveState=true,addFriendState;\r\n    int i=0,j=0,imageResourceId;\r\n   /* private APIService apiService;\r\n    String title =\"Notification\";\r\n    String message = \"Love\";*/\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n\r\n        View view = inflater.inflate(R.layout.fragment_friend_profile, container, false);\r\n     //   ((AppCompatActivity) getActivity()).getSupportActionBar().hide();\r\n        name=view.findViewById(R.id.profile_name);\r\n        loveNumbers=view.findViewById(R.id.profile_love_text);\r\n        friendNumbers=view.findViewById(R.id.profile_friend_text);\r\n        location=view.findViewById(R.id.profile_location);\r\n        bio=view.findViewById(R.id.profile_BIO);\r\n        linearAdd=view.findViewById(R.id.linear_add);\r\n        linearLove=view.findViewById(R.id.linear_love);\r\n        profile=view.findViewById(R.id.profile_image_details);\r\n        addLove=view.findViewById(R.id.profile_add_love);\r\n        addFriend=view.findViewById(R.id.profile_add_friend);\r\n        imageResourceId=R.drawable.whitelove;\r\n       // apiService= Client.getClient(\"https://fcm.googleapis.com/\").create(APIService.class);\r\n        profileRefrence =FirebaseDatabase.getInstance().getReference(\"Profiles\");\r\n\r\n        if(getArguments()!=null){\r\n            id=getArguments().getString(\"id\");\r\n            uName=getArguments().getString(\"name\");\r\n            uri=getArguments().getString(\"uri\");\r\n\r\n        }\r\n        firebaseUser= FirebaseAuth.getInstance().getCurrentUser();\r\n        getFriendData();\r\n        setAddFriendImageState();\r\n        setLoveImage();\r\n        getApprciate();\r\n        getFriendsNumber();\r\n\r\n        linearLove.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if(flag==true){\r\n                    addLove.setImageResource(R.drawable.bluelove);\r\n                    setLoveImage();\r\n                    makeLoves();\r\n/*\r\n                    FirebaseDatabase.getInstance().getReference().child(\"Tokens\").child(id).child(\"token\")\r\n                            .addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                    String userToken=snapshot.getValue(String.class);\r\n                                    sendNotifications(userToken,title,message);\r\n                                    Log.i(TAG, \"onDataChange: \");\r\n                                }\r\n\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                }\r\n                            });\r\n*/\r\n\r\n                    flag=false;\r\n                }else {\r\n                    addLove.setImageResource(R.drawable.whitelove);\r\n                    setLoveImage();\r\n                    deleteLove();\r\n                    flag=true;\r\n\r\n                }\r\n            }\r\n        });\r\n        linearAdd.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if(flag2==true){\r\n                    addFriend.setImageResource(R.drawable.blueadd);\r\n                   //addFriends();\r\n                    sendFriendRequest();\r\n                    setAddFriendImageState();\r\n                    flag2=false;\r\n\r\n                }else {\r\n                    addFriend.setImageResource(R.drawable.whiteadd);\r\n                   // deleteFriends();\r\n                    deleteFirendRequest();\r\n                    setAddFriendImageState();\r\n                    flag2=true;\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        //UpdateToken();\r\n        return view;\r\n    }\r\n\r\n  /*  private void UpdateToken() {\r\n        FirebaseUser firebaseUser =FirebaseAuth.getInstance().getCurrentUser();\r\n        String refreshToken= FirebaseInstanceId.getInstance().getToken();\r\n        Token token =new Token(refreshToken);\r\n        FirebaseDatabase.getInstance().getReference(\"Tokens\").child(FirebaseAuth.getInstance().getCurrentUser().getUid()).setValue(token);\r\n    }*/\r\n\r\n/*\r\n    private void sendNotifications(String userToken, String title, String message) {\r\n        Data data =new Data(title,message);\r\n        NotificationSender notificationSender = new NotificationSender(data,userToken);\r\n        Log.i(TAG, \"sendNotifications: \");\r\n        apiService.sendNotification(notificationSender).enqueue(new Callback<MyResponse>()\r\n       {\r\n            @Override\r\n            public void onResponse(Call<MyResponse> call, Response<MyResponse> response) {\r\n                if (response.code()==200){\r\n                    if (response.body().success!=1){\r\n                        Toast.makeText(getContext(), \"Failed\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call<MyResponse> call, Throwable t) {\r\n\r\n            }\r\n        });\r\n    }\r\n*/\r\n\r\n\r\n    private void getFriendData() {\r\n        Query query6 = FirebaseDatabase.getInstance().getReference().child(\"Users\").child(id);\r\n        query6.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if(dataSnapshot!=null){\r\n                    if (dataSnapshot.exists() && dataSnapshot.getChildrenCount()>0&&dataSnapshot.getValue().toString().length()>0) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                            // FriendListData user =snapshot.getValue(FriendListData.class);\r\n                              userName=dataSnapshot.child(\"name\").getValue(String.class);\r\n                              userImage=dataSnapshot.child(\"uri\").getValue(String.class);\r\n                            String  userLocation=dataSnapshot.child(\"location\").getValue(String.class);\r\n\r\n                            name.setText(userName);\r\n                            location.setText(userLocation);\r\n                            Picasso.get().load(userImage).into(profile);\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n        Query query7 = FirebaseDatabase.getInstance().getReference().child(\"Users\").child(firebaseUser.getUid());\r\n        query7.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if(dataSnapshot!=null){\r\n                    if (dataSnapshot.exists() && dataSnapshot.getChildrenCount()>0&&dataSnapshot.getValue().toString().length()>0) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                            // FriendListData user =snapshot.getValue(FriendListData.class);\r\n                            myName=dataSnapshot.child(\"name\").getValue(String.class);\r\n                            myImage=dataSnapshot.child(\"uri\").getValue(String.class);\r\n                            Toast.makeText(getActivity(), myName+\"   \"+myImage, Toast.LENGTH_SHORT).show();\r\n                            String  userLocation=dataSnapshot.child(\"location\").getValue(String.class);\r\n\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void makeLoves() {\r\n        if(getApprciate()!=null){\r\n            i=Integer.valueOf(getApprciate());\r\n        }\r\n\r\n        i++;\r\n        loveNumbers.setText(String.valueOf(i));\r\n        profileRefrence.child(\"Appreciate\").child(\"Likes\").child(id).child(\"Appreciate\").setValue(String.valueOf(i));\r\n        profileRefrence.child(\"Appreciate\").child(\"AppreciateListNotification\").child(firebaseUser.getUid()).child(id).child(\"name\").setValue(myName);\r\n        profileRefrence.child(\"Appreciate\").child(\"AppreciateListNotification\").child(firebaseUser.getUid()).child(id).child(\"uri\").setValue(myImage);\r\n\r\n        profileRefrence.child(\"Appreciate\").child(\"FriendsStats\").child(firebaseUser.getUid()).child(id).child(\"State\").setValue(true);\r\n\r\n\r\n    }\r\n    private void deleteLove() {\r\n\r\n        if(getApprciate()!=null){\r\n            i=Integer.valueOf(getApprciate());\r\n        }\r\n        i--;\r\n        loveNumbers.setText(String.valueOf(i));\r\n\r\n        profileRefrence.child(\"Appreciate\").child(\"Likes\").child(id).child(\"Appreciate\").setValue(String.valueOf(i));\r\n        profileRefrence.child(\"Appreciate\").child(\"AppreciateListNotification\").child(firebaseUser.getUid()).child(id).child(\"name\").removeValue();\r\n\r\n        profileRefrence.child(\"Appreciate\").child(\"FriendsStats\").child(firebaseUser.getUid()).child(id).child(\"State\").removeValue();\r\n\r\n    }\r\n    private void setLoveImage(){\r\n\r\n        Query query6 = FirebaseDatabase.getInstance().getReference().child(\"Profiles\").child(\"Appreciate\").child(\"FriendsStats\").child(firebaseUser.getUid()).child(id);\r\n        query6.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if(dataSnapshot!=null){\r\n                    if (dataSnapshot.exists() && dataSnapshot.getChildrenCount()>0&&dataSnapshot.getValue().toString().length()>0) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                            loveState =dataSnapshot.child(\"State\").getValue(Boolean.class);\r\n\r\n                 if(loveState){\r\n                       addLove.setImageResource(R.drawable.bluelove);\r\n\r\n                   }else {\r\n                       addLove.setImageResource(R.drawable.whitelove);\r\n                   }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                }else {\r\n                    Toast.makeText(getActivity(), \"no data\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void sendFriendRequest() {\r\n        FriendListData data=new FriendListData(myImage,myName,firebaseUser.getUid(),true);\r\n        DatabaseReference databaseReference=FirebaseDatabase.getInstance().getReference();\r\n        databaseReference.child(\"FriendsRequest\").child(id).child(firebaseUser.getUid()).setValue(data);\r\n\r\n    }\r\n    private void deleteFirendRequest() {\r\n        DatabaseReference databaseReference=FirebaseDatabase.getInstance().getReference();\r\n        databaseReference.child(\"FriendsRequest\").child(id).child(firebaseUser.getUid()).removeValue();\r\n\r\n    }\r\n\r\n\r\n    private void addFriends() {\r\n        if(getApprciate()!=null){\r\n            j=Integer.valueOf(getApprciate());\r\n        }\r\n\r\n        FriendListData data=new FriendListData(myImage,myName,firebaseUser.getUid(),true);\r\n        FriendListData data1=new FriendListData(userImage,userName,id,true);\r\n        j++;\r\n        profileRefrence.child(\"Friends\").child(\"FriendsNumber\").child(id).child(\"Friends\").setValue(String.valueOf(j));\r\n        profileRefrence.child(\"Friends\").child(\"FriendsNumber\").child(firebaseUser.getUid()).child(\"Friends\").setValue(String.valueOf(j));\r\n\r\n        profileRefrence.child(\"Friends\").child(\"FriendsList\").child(id).child(firebaseUser.getUid()).setValue(data);\r\n        profileRefrence.child(\"Friends\").child(\"FriendsList\").child(firebaseUser.getUid()).child(id).setValue(data1);\r\n\r\n    }\r\n    private void deleteFriends(){\r\n        if(getApprciate()!=null){\r\n            j=Integer.valueOf(getApprciate());\r\n        }\r\n\r\n        j--;\r\n        profileRefrence.child(\"Friends\").child(\"FriendsNumber\").child(id).child(\"Friends\").setValue(String.valueOf(j));\r\n        profileRefrence.child(\"Friends\").child(\"FriendsList\").child(id).child(firebaseUser.getUid()).removeValue() ;\r\n        profileRefrence.child(\"Friends\").child(\"FriendsList\").child(firebaseUser.getUid()).child(id).removeValue();\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    private void setAddFriendImageState(){\r\n        Query query6 = FirebaseDatabase.getInstance().getReference().child(\"Profiles\").child(\"Friends\").child(\"FriendsList\")\r\n                .child(firebaseUser.getUid());\r\n        query6.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if(dataSnapshot!=null){\r\n                    if (dataSnapshot.exists() && dataSnapshot.getChildrenCount()>0&&dataSnapshot.getValue().toString().length()>0) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                                FriendListData data=snapshot.getValue(FriendListData.class);\r\n                                if(data.getId().equals(id)){\r\n                                    if(data.isState()){\r\n                                        addFriend.setImageResource(R.drawable.blueadd);\r\n\r\n                                    }else {\r\n                                        addFriend.setImageResource(R.drawable.whiteadd);\r\n                                    }\r\n                                }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                }else {\r\n                    Toast.makeText(getActivity(), \"no data\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n    private String getApprciate(){\r\n        Query query6 = FirebaseDatabase.getInstance().getReference().child(\"Profiles\").child(\"Friends\").child(\"FriendsNumber\")\r\n                .child(id);\r\n        query6.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if(dataSnapshot!=null){\r\n                    if (dataSnapshot.exists() && dataSnapshot.getChildrenCount()>0&&dataSnapshot.getValue().toString().length()>0) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                            appreciateNumber=dataSnapshot.child(\"Friends\").getValue(String.class);\r\n                            friendNumbers.setText(appreciateNumber);\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                }else {\r\n                    Toast.makeText(getActivity(), \"no data\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n        return appreciateNumber;\r\n\r\n    }\r\n    private String getFriendsNumber(){\r\n        Query query6 = FirebaseDatabase.getInstance().getReference().child(\"Profiles\").child(\"Appreciate\").child(\"Likes\")\r\n                .child(id);\r\n        query6.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if(dataSnapshot!=null){\r\n                    if (dataSnapshot.exists() && dataSnapshot.getChildrenCount()>0&&dataSnapshot.getValue().toString().length()>0) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                            friendsNumber=dataSnapshot.child(\"Appreciate\").getValue(String.class);\r\n                            loveNumbers.setText(friendsNumber);\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                }else {\r\n                    Toast.makeText(getActivity(), \"no data\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n        return friendsNumber;\r\n\r\n    }\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setHasOptionsMenu(false);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\r\n        super.onCreateOptionsMenu(menu, inflater);\r\n        menu.clear();\r\n    }\r\n\r\n\r\n    /*private void makeLoves() {\r\n        //  databaseReference =FirebaseDatabase.getInstance().getReference(\"Profiles\");\r\n        i++;\r\n        //    databaseReference.child(id).child(\"Appreciate\").setValue(i);\r\n        SharedPreferences sharedPreferences=getActivity().getSharedPreferences(SHARED, Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor=sharedPreferences.edit();\r\n        editor.putBoolean(STATE,true);\r\n        editor.apply();\r\n\r\n    }\r\n    private void deleteLove(){\r\n        SharedPreferences sharedPreferences=getActivity().getSharedPreferences(SHARED, Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor=sharedPreferences.edit();\r\n        editor.putBoolean(STATE,false);\r\n        editor.apply();\r\n\r\n    }\r\n    private void stateLovePhoto(){\r\n        SharedPreferences sharedPreferences1=getActivity().getSharedPreferences(SHARED, Context.MODE_PRIVATE);\r\n\r\n        this.loveState=sharedPreferences1.getBoolean(STATE,false);\r\n        if(this.loveState){\r\n            addLove.setImageResource(R.drawable.bluelove);\r\n        }else {\r\n            addLove.setImageResource(R.drawable.whitelove);\r\n\r\n        }\r\n\r\n    }*/\r\n    \r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Fragments/FriendProfileFragment.java	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/java/com/example/graduationproject/Fragments/FriendProfileFragment.java	(date 1621986576546)
@@ -253,8 +253,8 @@
         i++;
         loveNumbers.setText(String.valueOf(i));
         profileRefrence.child("Appreciate").child("Likes").child(id).child("Appreciate").setValue(String.valueOf(i));
-        profileRefrence.child("Appreciate").child("AppreciateListNotification").child(firebaseUser.getUid()).child(id).child("name").setValue(myName);
-        profileRefrence.child("Appreciate").child("AppreciateListNotification").child(firebaseUser.getUid()).child(id).child("uri").setValue(myImage);
+        profileRefrence.child("Appreciate").child("AppreciateListNotification").child(id).child(firebaseUser.getUid()).child("name").setValue(myName);
+        profileRefrence.child("Appreciate").child("AppreciateListNotification").child(id).child(firebaseUser.getUid()).child("uri").setValue(myImage);
 
         profileRefrence.child("Appreciate").child("FriendsStats").child(firebaseUser.getUid()).child(id).child("State").setValue(true);
 
Index: app/src/main/java/com/example/graduationproject/Fragments/NotificationNotificationsTabFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.graduationproject.Fragments;\r\n\r\nimport android.app.Notification;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.DividerItemDecoration;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.graduationproject.Adapter.FriendListAdapter;\r\nimport com.example.graduationproject.Adapter.NotificationTabAdapter;\r\nimport com.example.graduationproject.Data.FriendListData;\r\nimport com.example.graduationproject.Data.NotificationTabData;\r\nimport com.example.graduationproject.R;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class NotificationNotificationsTabFragment extends Fragment {\r\n    private RecyclerView notificationTabRecyclerView;\r\n    private List<NotificationTabData> notificationTabDataList;\r\n    private NotificationTabAdapter notificationTabAdapter;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view =inflater.inflate(R.layout.fragment_notification_notifications_tab, container, false);\r\n        notificationTabRecyclerView=view.findViewById(R.id.notification_tab_recycler_view);\r\n        notificationTabRecyclerView.setLayoutManager( new LinearLayoutManager(getContext()));\r\n        notificationTabRecyclerView.setHasFixedSize(true);\r\n        notificationTabDataList =new ArrayList<>();\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mariam Alaa\",\"Asked you for an appreciate\"));\r\n        notificationTabDataList.add(new NotificationTabData(\"Mai Hassan\",\"Send you an appreciate\"));\r\n\r\n        notificationTabAdapter =new NotificationTabAdapter(notificationTabDataList,getContext());\r\n        DividerItemDecoration dividerItemDecoration = new DividerItemDecoration(getContext(), new LinearLayoutManager(getContext()).getOrientation());\r\n        notificationTabRecyclerView.addItemDecoration(dividerItemDecoration);\r\n        notificationTabRecyclerView.setAdapter(notificationTabAdapter);\r\n        return view;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Fragments/NotificationNotificationsTabFragment.java	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/java/com/example/graduationproject/Fragments/NotificationNotificationsTabFragment.java	(date 1621989667097)
@@ -3,11 +3,13 @@
 import android.app.Notification;
 import android.os.Bundle;
 
+import androidx.annotation.NonNull;
 import androidx.fragment.app.Fragment;
 import androidx.recyclerview.widget.DividerItemDecoration;
 import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
 
+import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -17,6 +19,12 @@
 import com.example.graduationproject.Data.FriendListData;
 import com.example.graduationproject.Data.NotificationTabData;
 import com.example.graduationproject.R;
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.database.DataSnapshot;
+import com.google.firebase.database.DatabaseError;
+import com.google.firebase.database.FirebaseDatabase;
+import com.google.firebase.database.Query;
+import com.google.firebase.database.ValueEventListener;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -34,31 +42,32 @@
         notificationTabRecyclerView.setLayoutManager( new LinearLayoutManager(getContext()));
         notificationTabRecyclerView.setHasFixedSize(true);
         notificationTabDataList =new ArrayList<>();
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mariam Alaa","Asked you for an appreciate"));
-        notificationTabDataList.add(new NotificationTabData("Mai Hassan","Send you an appreciate"));
-
-        notificationTabAdapter =new NotificationTabAdapter(notificationTabDataList,getContext());
-        DividerItemDecoration dividerItemDecoration = new DividerItemDecoration(getContext(), new LinearLayoutManager(getContext()).getOrientation());
-        notificationTabRecyclerView.addItemDecoration(dividerItemDecoration);
-        notificationTabRecyclerView.setAdapter(notificationTabAdapter);
+        Query query = FirebaseDatabase.getInstance().getReference().child("Profiles").child("Appreciate").child("AppreciateListNotification")
+                            .child(FirebaseAuth.getInstance().getCurrentUser().getUid());
+        query.addListenerForSingleValueEvent(new ValueEventListener() {
+            @Override
+            public void onDataChange(@NonNull DataSnapshot snapshot) {
+                notificationTabDataList.clear();
+                if (snapshot.exists()) {
+                    for (DataSnapshot snapshot1 : snapshot.getChildren()) {
+                        NotificationTabData notificationTabData= snapshot1.getValue(NotificationTabData.class);
+                        notificationTabDataList.add(notificationTabData);
+                        Log.i(notificationTabData.getName(), "Notification sender: ");
+                    }
+                    notificationTabAdapter =new NotificationTabAdapter(notificationTabDataList,getContext());
+                    DividerItemDecoration dividerItemDecoration = new DividerItemDecoration(getContext(), new LinearLayoutManager(getContext()).getOrientation());
+                    notificationTabRecyclerView.addItemDecoration(dividerItemDecoration);
+                    notificationTabRecyclerView.setAdapter(notificationTabAdapter);
+
+                }
+            }
+
+            @Override
+            public void onCancelled(@NonNull DatabaseError error) {
+
+            }
+        });
+
         return view;
     }
 }
\ No newline at end of file
Index: app/src/main/java/com/example/graduationproject/Activities/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.graduationproject.Activities;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.ActionBarDrawerToggle;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.view.GravityCompat;\r\nimport androidx.drawerlayout.widget.DrawerLayout;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.graduationproject.Fragments.AppointmentsFragment;\r\nimport com.example.graduationproject.Fragments.CartFragment;\r\nimport com.example.graduationproject.Fragments.FriendListFragment;\r\nimport com.example.graduationproject.Fragments.HomeFragment;\r\nimport com.example.graduationproject.Fragments.NotificationFragment;\r\nimport com.example.graduationproject.Fragments.ProfileFragment;\r\nimport com.example.graduationproject.Fragments.TherapistsFragment;\r\nimport com.example.graduationproject.R;\r\nimport com.example.graduationproject.Sign.SignMainActivity;\r\nimport com.facebook.login.LoginManager;\r\nimport com.google.android.material.navigation.NavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\npublic class MainActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener {\r\n    private Toolbar toolbar;\r\n    private DrawerLayout drawerLayout;\r\n    private NavigationView navigationView;\r\n    public FirebaseAuth mAuth;\r\n    String userName,userImage;\r\n    CircleImageView imgHead;\r\n    View view;\r\n    TextView textName;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        toolbar=findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n\r\n        drawerLayout =findViewById(R.id.drawer_layout);\r\n        ActionBarDrawerToggle toggle=new ActionBarDrawerToggle(this,drawerLayout,toolbar,R.string.open,R.string.close);\r\n        drawerLayout.addDrawerListener(toggle);\r\n        toggle.syncState();\r\n        mAuth = FirebaseAuth.getInstance();\r\n        getHeader();\r\n\r\n        navigationView=findViewById(R.id.navigation);\r\n        view =navigationView.getHeaderView(0);\r\n        imgHead=view.findViewById(R.id.header_image);\r\n        textName=view.findViewById(R.id.header_name);\r\n        navigationView.setNavigationItemSelectedListener(this);\r\n        if(savedInstanceState==null) {\r\n            getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new HomeFragment()).commit();\r\n            navigationView.setCheckedItem(R.id.home);\r\n        }\r\n\r\n    }\r\n    @Override\r\n    public void onBackPressed() {\r\n        if(drawerLayout.isDrawerOpen(GravityCompat.START)){\r\n            drawerLayout.closeDrawer(GravityCompat.START);\r\n        }else{\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {\r\n        switch (menuItem.getItemId()){\r\n            case R.id.home:\r\n                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new HomeFragment()).commit();\r\n                break;\r\n            case R.id.profile:\r\n                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new ProfileFragment()).commit();\r\n                break;\r\n            case R.id.friends_list:\r\n                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new FriendListFragment()).commit();\r\n                break;\r\n            case R.id.therapists:\r\n                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new TherapistsFragment()).commit();\r\n                break;\r\n            case R.id.notification:\r\n                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new NotificationFragment()).commit();\r\n                break;\r\n            case R.id.appointments:\r\n                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new AppointmentsFragment()).commit();\r\n                break;\r\n            case R.id.cart:\r\n                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new CartFragment()).commit();\r\n                break;\r\n            case R.id.log_out:\r\n\r\n                Toast.makeText(this, \"Log Out\", Toast.LENGTH_SHORT).show();\r\n\r\n                mAuth.signOut();\r\n                FirebaseAuth.getInstance().signOut();\r\n                LoginManager.getInstance().logOut();\r\n\r\n                Intent intent = new Intent(getApplicationContext(), SignMainActivity.class);\r\n                intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);\r\n                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                startActivity(intent);\r\n\r\n                //Toast.makeText(getActivity(),\"Logged out!\",Toast.LENGTH_LONG).show();\r\n\r\n                break;\r\n\r\n        }\r\n        drawerLayout.closeDrawer(GravityCompat.START);\r\n        return true;\r\n    }\r\n    private void getHeader() {\r\n        FirebaseUser firebaseUser=mAuth.getCurrentUser();\r\n        final String id=firebaseUser.getUid();\r\n\r\n        Query query6 = FirebaseDatabase.getInstance().getReference().child(\"Users\").child(id);\r\n        query6.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if(dataSnapshot!=null){\r\n                    if (dataSnapshot.exists() && dataSnapshot.getChildrenCount()>0&&dataSnapshot.getValue().toString().length()>0) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n                            userName=dataSnapshot.child(\"name\").getValue(String.class);\r\n                            userImage=dataSnapshot.child(\"uri\").getValue(String.class);\r\n                            textName.setText(userName);\r\n                            Picasso.get().load(userImage).into(imgHead);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Activities/MainActivity.java	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/java/com/example/graduationproject/Activities/MainActivity.java	(date 1621989667152)
@@ -9,6 +9,7 @@
 
 import android.content.Intent;
 import android.os.Bundle;
+import android.util.Log;
 import android.view.MenuItem;
 import android.view.View;
 import android.widget.TextView;
@@ -105,7 +106,7 @@
                 getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new AppointmentsFragment()).commit();
                 break;
             case R.id.cart:
-                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new CartFragment()).commit();
+               getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container,new CartFragment()).commit();
                 break;
             case R.id.log_out:
 
@@ -142,6 +143,7 @@
                         for (DataSnapshot snapshot : dataSnapshot.getChildren()) {
                             userName=dataSnapshot.child("name").getValue(String.class);
                             userImage=dataSnapshot.child("uri").getValue(String.class);
+                            Log.i(userName.toString(), "onDataChange: ");
                             textName.setText(userName);
                             Picasso.get().load(userImage).into(imgHead);
 
Index: app/src/main/java/com/example/graduationproject/Adapter/NotificationTabAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.graduationproject.Adapter;\r\n\r\nimport android.content.Context;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport com.example.graduationproject.Data.NotificationTabData;\r\nimport com.example.graduationproject.R;\r\n\r\nimport java.util.List;\r\n\r\npublic class NotificationTabAdapter extends RecyclerView.Adapter<NotificationTabAdapter.NotificationTabAdapterViewHolder> {\r\n    List<NotificationTabData> notificationTabDataList;\r\n    Context context;\r\n    public NotificationTabAdapter(List<NotificationTabData> notificationTabDataList, Context context){\r\n        this.notificationTabDataList =notificationTabDataList;\r\n        this.context =context;\r\n    }\r\n    @NonNull\r\n    @Override\r\n    public NotificationTabAdapterViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.notification_tab_row,parent,false);\r\n        return new NotificationTabAdapterViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull NotificationTabAdapterViewHolder holder, int position) {\r\n        holder.name.setText(notificationTabDataList.get(position).getName());\r\n        holder.state.setText(notificationTabDataList.get(position).getStateOfNotification());\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return notificationTabDataList.size();\r\n    }\r\n\r\n    public class NotificationTabAdapterViewHolder extends RecyclerView.ViewHolder{\r\n        TextView name,state;\r\n        public NotificationTabAdapterViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            name=itemView.findViewById(R.id.notification_tab_name);\r\n            state=itemView.findViewById(R.id.notification_tab_state);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Adapter/NotificationTabAdapter.java	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/java/com/example/graduationproject/Adapter/NotificationTabAdapter.java	(date 1621987714730)
@@ -4,11 +4,13 @@
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
+import android.widget.ImageView;
 import android.widget.TextView;
 import androidx.annotation.NonNull;
 import androidx.recyclerview.widget.RecyclerView;
 import com.example.graduationproject.Data.NotificationTabData;
 import com.example.graduationproject.R;
+import com.squareup.picasso.Picasso;
 
 import java.util.List;
 
@@ -29,7 +31,8 @@
     @Override
     public void onBindViewHolder(@NonNull NotificationTabAdapterViewHolder holder, int position) {
         holder.name.setText(notificationTabDataList.get(position).getName());
-        holder.state.setText(notificationTabDataList.get(position).getStateOfNotification());
+        String image=notificationTabDataList.get(position).getUri();
+        Picasso.get().load(image).into(holder.uri);
     }
 
     @Override
@@ -38,11 +41,12 @@
     }
 
     public class NotificationTabAdapterViewHolder extends RecyclerView.ViewHolder{
-        TextView name,state;
+        TextView name;
+        ImageView uri;
         public NotificationTabAdapterViewHolder(@NonNull View itemView) {
             super(itemView);
             name=itemView.findViewById(R.id.notification_tab_name);
-            state=itemView.findViewById(R.id.notification_tab_state);
+            uri=itemView.findViewById(R.id.notification_tab_image);
         }
     }
 
Index: app/src/main/java/com/example/graduationproject/Notification/APIService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Notification/APIService.java	(date 1621636069634)
+++ app/src/main/java/com/example/graduationproject/Notification/APIService.java	(date 1621636069634)
@@ -0,0 +1,17 @@
+package com.example.graduationproject.Notification;
+
+import retrofit2.Call;
+import retrofit2.http.Body;
+import retrofit2.http.Headers;
+import retrofit2.http.POST;
+
+public interface APIService {
+    @Headers(
+        {
+            "Content-Type:application/json",
+            "Authorization:key=AAAAvkept9I:APA91bGLUASRrfj3pxc97dGKBc31OZldaejWcu0M1Vqk-shRZRGzhbpnO5oRCdBHteEbd05sKa3jOBAplMAUaympIQcIg-XG6PIHhGxFor48I_UvkqEwcth_jo8eFCVhOJT6mbrv6GQM"
+        }
+    )
+    @POST("fcm/send")
+    Call<MyResponse> sendNotification(@Body NotificationSender body);
+}
Index: app/src/main/java/com/example/graduationproject/Notification/MyFirebaseIdService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Notification/MyFirebaseIdService.java	(date 1621636069613)
+++ app/src/main/java/com/example/graduationproject/Notification/MyFirebaseIdService.java	(date 1621636069613)
@@ -0,0 +1,27 @@
+package com.example.graduationproject.Notification;
+
+import androidx.annotation.NonNull;
+
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.auth.FirebaseUser;
+import com.google.firebase.database.FirebaseDatabase;
+import com.google.firebase.iid.FirebaseInstanceId;
+import com.google.firebase.messaging.FirebaseMessagingService;
+
+public class MyFirebaseIdService extends FirebaseMessagingService {
+    @Override
+    public void onNewToken(@NonNull String s) {
+        super.onNewToken(s);
+        FirebaseUser firebaseUser = FirebaseAuth.getInstance().getCurrentUser();
+        String refreshToken= FirebaseInstanceId.getInstance().getToken();
+        if (firebaseUser != null){
+            updateToken(refreshToken);
+        }
+
+    }
+    private void updateToken(String refreshToken) {
+        FirebaseUser firebaseUser = FirebaseAuth.getInstance().getCurrentUser();
+        Token token1 =new Token(refreshToken);
+        FirebaseDatabase.getInstance().getReference("Tokens").child(FirebaseAuth.getInstance().getCurrentUser().getUid()).setValue(token1);
+    }
+}
Index: app/src/main/java/com/example/graduationproject/Notification/Token.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Notification/Token.java	(date 1621636069673)
+++ app/src/main/java/com/example/graduationproject/Notification/Token.java	(date 1621636069673)
@@ -0,0 +1,20 @@
+package com.example.graduationproject.Notification;
+
+public class Token {
+    String token;
+
+    public Token(String token) {
+        this.token = token;
+    }
+
+    public Token() {
+    }
+
+    public String getToken() {
+        return token;
+    }
+
+    public void setToken(String token) {
+        this.token = token;
+    }
+}
Index: app/src/main/java/com/example/graduationproject/Fragments/ProfileFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.graduationproject.Fragments;\r\n\r\nimport android.app.DownloadManager;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.graduationproject.R;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.squareup.picasso.Picasso;\r\n\r\npublic class\r\n\r\n\r\n\r\nProfileFragment extends Fragment implements View.OnClickListener {\r\n    private TextView profileName,therapistNum,friendsNum,heartNum;\r\n    private ImageView profilePic;\r\n    private FloatingActionButton floatingEditProfileBtn;\r\n    public FirebaseAuth auth ;\r\n    String userName,userImage,friendsNumber,heartNumber;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view= inflater.inflate(R.layout.fragment_profile, container, false);\r\n        setHasOptionsMenu(false);\r\n        profileName=view.findViewById(R.id.profile_name);\r\n        therapistNum=view.findViewById(R.id.profile_therapist_num);\r\n        friendsNum=view.findViewById(R.id.profile_friends_num);\r\n        heartNum=view.findViewById(R.id.profile_heart_num);\r\n        profilePic=view.findViewById(R.id.profile_image);\r\n        floatingEditProfileBtn =view.findViewById(R.id.floating_edit_profile_btn);\r\n        floatingEditProfileBtn.setOnClickListener(this);\r\n        auth=FirebaseAuth.getInstance();\r\n        dataBase();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void dataBase() {\r\n        FirebaseUser firebaseUser = auth.getCurrentUser();\r\n        final String id =firebaseUser.getUid();\r\n        Query query = FirebaseDatabase.getInstance().getReference().child(\"Users\").child(id);\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot!= null){\r\n                    if (snapshot.exists()&& snapshot.getChildrenCount()>0&&snapshot.getValue().toString().length()>0){\r\n                        for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                            userName=snapshot.child(\"name\").getValue(String.class);\r\n                            userImage=snapshot.child(\"uri\").getValue(String.class);\r\n                            profileName.setText(userName);\r\n                            Picasso.get().load(userImage).into(profilePic);\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        Query query1 = FirebaseDatabase.getInstance().getReference().child(\"Profiles\").child(\"Friends\").child(\"FriendsNumber\").child(id);\r\n        query1.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot!= null){\r\n                    if (snapshot.exists()&& snapshot.getChildrenCount()>0&&snapshot.getValue().toString().length()>0){\r\n                        for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                            friendsNumber=snapshot.child(\"Friends\").getValue(String.class);\r\n                            friendsNum.setText(friendsNumber);\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        Query query2 = FirebaseDatabase.getInstance().getReference().child(\"Profiles\").child(\"Appreciate\").child(\"Likes\").child(id);\r\n        query2.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot!= null){\r\n                    if (snapshot.exists()&& snapshot.getChildrenCount()>0&&snapshot.getValue().toString().length()>0){\r\n                        for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                            heartNumber=snapshot.child(\"Appreciate\").getValue(String.class);\r\n                            heartNum.setText(heartNumber);\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onClick(View view) {\r\n        FragmentManager fragmentManager = getFragmentManager();\r\n        fragmentManager.beginTransaction().replace(R.id.fragment_container,new EditProfileFragment()).addToBackStack(\"\").commit();\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Fragments/ProfileFragment.java	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/java/com/example/graduationproject/Fragments/ProfileFragment.java	(date 1621985756928)
@@ -80,7 +80,7 @@
             }
         });
 
-        Query query1 = FirebaseDatabase.getInstance().getReference().child("Profiles").child("Friends").child("FriendsNumber").child(id);
+        Query query1 = FirebaseDatabase.getInstance().getReference().child("Friends").child("FriendsNumber").child(id);
         query1.addListenerForSingleValueEvent(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
Index: app/src/main/java/com/example/graduationproject/Notification/MyFirebaseMessagingService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Notification/MyFirebaseMessagingService.java	(date 1621636069642)
+++ app/src/main/java/com/example/graduationproject/Notification/MyFirebaseMessagingService.java	(date 1621636069642)
@@ -0,0 +1,42 @@
+package com.example.graduationproject.Notification;
+
+import android.app.NotificationChannel;
+import android.app.NotificationManager;
+import android.content.Context;
+import android.os.Build;
+import android.util.Log;
+
+import androidx.annotation.NonNull;
+import androidx.core.app.NotificationCompat;
+
+import com.example.graduationproject.R;
+import com.google.firebase.messaging.FirebaseMessagingService;
+import com.google.firebase.messaging.RemoteMessage;
+
+public class MyFirebaseMessagingService extends FirebaseMessagingService {
+    String title,message;
+  String CHANNAL_ID="good";
+    @Override
+    public void onMessageReceived(@NonNull RemoteMessage remoteMessage) {
+        super.onMessageReceived(remoteMessage);
+        title=remoteMessage.getData().get("Title");
+        message=remoteMessage.getData().get("Message");
+
+        NotificationCompat.Builder builder = new NotificationCompat.Builder(getApplicationContext())
+                .setSmallIcon(R.drawable.ic_baseline_notifications_24)
+                .setContentTitle(title)
+                .setContentText(message);
+       /* NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
+        manager.notify(0,builder.build());
+*/
+
+     if(Build.VERSION.SDK_INT>=Build.VERSION_CODES.O){
+        NotificationChannel notificationChannel = new NotificationChannel(CHANNAL_ID,"notification",NotificationManager.IMPORTANCE_DEFAULT);
+        NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
+        manager.createNotificationChannel(notificationChannel);
+        manager.notify(0,builder.build());
+            Log.i("Gouda", "onMessageReceived: ");
+    }
+   }
+
+}
Index: app/src/main/res/layout/notification_tab_row.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.cardview.widget.CardView\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"60dp\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    app:cardCornerRadius=\"15dp\"\r\n    android:layout_marginLeft=\"10dp\"\r\n    android:layout_marginRight=\"10dp\"\r\n    android:layout_marginTop=\"3dp\"\r\n    android:layout_marginBottom=\"3dp\"\r\n    android:background=\"@color/lightGray\"\r\n   >\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:gravity=\"center_vertical\"\r\n        android:orientation=\"horizontal\">\r\n    <de.hdodenhof.circleimageview.CircleImageView\r\n        android:id=\"@+id/notification_tab_image\"\r\n        android:layout_width=\"50dp\"\r\n        android:layout_height=\"50dp\"\r\n        android:src=\"@drawable/doctor_icon\"\r\n        android:layout_marginLeft=\"10dp\"\r\n        />\r\n     <LinearLayout\r\n         android:layout_width=\"190dp\"\r\n         android:layout_height=\"wrap_content\"\r\n         android:orientation=\"vertical\"\r\n         android:layout_marginLeft=\"10dp\"\r\n         >\r\n    <TextView\r\n        android:id=\"@+id/notification_tab_name\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Mariam Alaa\"\r\n        android:textSize=\"18dp\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/notification_tab_state\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Asked you for an appreciate\"\r\n            android:layout_marginTop=\"5dp\"\r\n            android:textSize=\"12dp\"\r\n            />\r\n     </LinearLayout>\r\n        <ImageView\r\n            android:id=\"@+id/notification_tab_icon\"\r\n            android:layout_width=\"30dp\"\r\n            android:layout_height=\"30dp\"\r\n            android:src=\"@drawable/heart_icon\"\r\n            android:layout_marginLeft=\"50dp\"/>\r\n    </LinearLayout>\r\n</androidx.cardview.widget.CardView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/notification_tab_row.xml	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/res/layout/notification_tab_row.xml	(date 1621982211107)
@@ -40,7 +40,7 @@
             android:id="@+id/notification_tab_state"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
-            android:text="Asked you for an appreciate"
+            android:text="Send you an appreciate"
             android:layout_marginTop="5dp"
             android:textSize="12dp"
             />
@@ -50,6 +50,6 @@
             android:layout_width="30dp"
             android:layout_height="30dp"
             android:src="@drawable/heart_icon"
-            android:layout_marginLeft="50dp"/>
+            android:layout_marginLeft="40dp"/>
     </LinearLayout>
 </androidx.cardview.widget.CardView>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_profile.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:gravity=\"center_horizontal\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".Fragments.ProfileFragment\">\r\n\r\n    <de.hdodenhof.circleimageview.CircleImageView\r\n        android:id=\"@+id/profile_image\"\r\n        android:layout_width=\"180dp\"\r\n        android:layout_height=\"180dp\"\r\n        android:layout_marginTop=\"@dimen/_30sdp\"\r\n        android:background=\"@drawable/doctor_icon\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/profile_name\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"@dimen/_10sdp\"\r\n        android:text=\"Ahmed Ali\"\r\n        android:textSize=\"@dimen/_23sdp\"\r\n        android:textColor=\"@color/black\"/>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"@dimen/_100sdp\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\"\r\n            android:gravity=\"center_horizontal\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/profile_therapist_num\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"2\"\r\n                android:textSize=\"@dimen/_20sdp\"\r\n                android:textColor=\"@color/black\"\r\n                />\r\n\r\n\r\n            <ImageView\r\n                android:layout_width=\"@dimen/_35sdp\"\r\n                android:layout_height=\"@dimen/_35sdp\"\r\n                android:background=\"@drawable/doctor_icon\"\r\n                android:layout_marginTop=\"@dimen/_10sdp\"/>\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\"\r\n            android:layout_marginLeft=\"@dimen/_65sdp\"\r\n            android:gravity=\"center_horizontal\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/profile_friends_num\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"215\"\r\n                android:textSize=\"@dimen/_20sdp\"\r\n                android:textColor=\"@color/black\"/>\r\n\r\n            <ImageView\r\n                android:layout_width=\"@dimen/_35sdp\"\r\n                android:layout_height=\"@dimen/_35sdp\"\r\n                android:background=\"@drawable/friends\"\r\n                android:layout_marginTop=\"@dimen/_10sdp\"/>\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\"\r\n            android:layout_marginLeft=\"@dimen/_65sdp\"\r\n            android:gravity=\"center_horizontal\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/profile_heart_num\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n\r\n                android:text=\"25\"\r\n                android:textSize=\"@dimen/_20sdp\"\r\n                android:textColor=\"@color/black\"/>\r\n\r\n            <ImageView\r\n                android:layout_width=\"@dimen/_35sdp\"\r\n                android:layout_height=\"@dimen/_35sdp\"\r\n                android:background=\"@drawable/heart_icon\"\r\n                android:layout_marginTop=\"@dimen/_10sdp\"/>\r\n        </LinearLayout>\r\n\r\n\r\n    </LinearLayout>\r\n\r\n    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:id=\"@+id/floating_edit_profile_btn\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:src=\"@drawable/ic_baseline_edit_24\"\r\n        android:layout_gravity=\"end|bottom\"\r\n        android:layout_marginEnd=\"@dimen/_15sdp\"\r\n        android:layout_marginTop=\"@dimen/_110sdp\"\r\n        android:layout_marginBottom=\"20dp\"\r\n        />\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_profile.xml	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/res/layout/fragment_profile.xml	(date 1621987004846)
@@ -40,7 +40,7 @@
                 android:id="@+id/profile_therapist_num"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
-                android:text="2"
+                android:text="0"
                 android:textSize="@dimen/_20sdp"
                 android:textColor="@color/black"
                 />
@@ -65,7 +65,7 @@
                 android:id="@+id/profile_friends_num"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
-                android:text="215"
+                android:text="0"
                 android:textSize="@dimen/_20sdp"
                 android:textColor="@color/black"/>
 
@@ -88,7 +88,7 @@
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
 
-                android:text="25"
+                android:text="0"
                 android:textSize="@dimen/_20sdp"
                 android:textColor="@color/black"/>
 
Index: app/src/main/java/com/example/graduationproject/Data/NotificationTabData.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.graduationproject.Data;\r\n\r\npublic class NotificationTabData {\r\n    private String name;\r\n    private String stateOfNotification;\r\n\r\n    public NotificationTabData(String name, String stateOfNotification) {\r\n        this.name = name;\r\n        this.stateOfNotification = stateOfNotification;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getStateOfNotification() {\r\n        return stateOfNotification;\r\n    }\r\n\r\n    public void setStateOfNotification(String stateOfNotification) {\r\n        this.stateOfNotification = stateOfNotification;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Data/NotificationTabData.java	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/java/com/example/graduationproject/Data/NotificationTabData.java	(date 1621987602607)
@@ -1,12 +1,14 @@
 package com.example.graduationproject.Data;
 
 public class NotificationTabData {
-    private String name;
-    private String stateOfNotification;
+    private String name,uri;
 
-    public NotificationTabData(String name, String stateOfNotification) {
+    public NotificationTabData(String name, String uri) {
         this.name = name;
-        this.stateOfNotification = stateOfNotification;
+        this.uri = uri;
+    }
+
+    public NotificationTabData() {
     }
 
     public String getName() {
@@ -17,11 +19,11 @@
         this.name = name;
     }
 
-    public String getStateOfNotification() {
-        return stateOfNotification;
+    public String getUri() {
+        return uri;
     }
 
-    public void setStateOfNotification(String stateOfNotification) {
-        this.stateOfNotification = stateOfNotification;
+    public void setUri(String uri) {
+        this.uri = uri;
     }
 }
Index: app/src/main/java/com/example/graduationproject/Adapter/FriendRequestTabAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.graduationproject.Adapter;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.graduationproject.Data.FriendListData;\r\nimport com.example.graduationproject.Data.FriendRequestTabData;\r\nimport com.example.graduationproject.R;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.List;\r\n\r\npublic class FriendRequestTabAdapter extends RecyclerView.Adapter<FriendRequestTabAdapter.FriendRequestTabAdapterViewHolder> {\r\n    List<FriendListData> friendListDataList;\r\n    Context context;\r\n    String id,appreciateNumber,userName,userImage,friendName,friendImage;\r\n    DatabaseReference profileRefrence;\r\n    FirebaseAuth auth;\r\n\r\n\r\n    int i=0,j=0,imageResourceId;\r\n\r\n    public FriendRequestTabAdapter(List<FriendListData> friendListDataList , Context context){\r\n        this.friendListDataList =friendListDataList;\r\n        this.context =context;\r\n        auth=FirebaseAuth.getInstance();\r\n        profileRefrence=FirebaseDatabase.getInstance().getReference();\r\n        userData();\r\n\r\n    }\r\n    @NonNull\r\n    @Override\r\n    public FriendRequestTabAdapterViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.friend_request_tab_row,parent,false);\r\n        return new FriendRequestTabAdapterViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull FriendRequestTabAdapterViewHolder holder, int position) {\r\n        id =friendListDataList.get(position).getId();\r\n        friendName=friendListDataList.get(position).getName();\r\n        friendImage=friendListDataList.get(position).getUri();\r\n        holder.name.setText(friendName);\r\n        Picasso.get().load(friendImage).into(holder.imageView);\r\n        holder.confirm.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                addFriends();\r\n                deleteFirendRequest();\r\n\r\n            }\r\n        });\r\n        holder.cancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                deleteFriends();\r\n                deleteFirendRequest();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return friendListDataList.size();\r\n    }\r\n\r\n    public class FriendRequestTabAdapterViewHolder extends RecyclerView.ViewHolder {\r\n        TextView name;\r\n        ImageView imageView;\r\n        Button confirm,cancel;\r\n        public FriendRequestTabAdapterViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            name=itemView.findViewById(R.id.friend_request_tab_name);\r\n            imageView=itemView.findViewById(R.id.friend_request_tab_image);\r\n            confirm=itemView.findViewById(R.id.friend_request_tab_confirm_btn);\r\n            cancel=itemView.findViewById(R.id.friend_request_tab_delete_btn);\r\n\r\n\r\n        }\r\n    }\r\n    private void userData(){\r\n        FirebaseUser firebaseUser=auth.getCurrentUser();\r\n        Query query =FirebaseDatabase.getInstance().getReference().child(\"Users\").child(firebaseUser.getUid());\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot!= null){\r\n                    if (snapshot.exists()&& snapshot.getChildrenCount()>0&&snapshot.getValue().toString().length()>0){\r\n                        for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                            userName = snapshot.child(\"name\").getValue(String.class);\r\n                            userImage = snapshot.child(\"uri\").getValue(String.class);\r\n                            Log.i(\"username\", userName);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n  private void addFriends() {\r\n        if(getApprciate()!=null){\r\n            j=Integer.valueOf(getApprciate());\r\n        }\r\n      FirebaseUser firebaseUser=auth.getCurrentUser();\r\n      FriendListData data=new FriendListData(userImage,userName,firebaseUser.getUid(),true);\r\n        FriendListData data1=new FriendListData(friendImage,friendName,id,true);\r\n        j++;\r\n        profileRefrence.child(\"Friends\").child(\"FriendsNumber\").child(id).child(\"Friends\").setValue(String.valueOf(j));\r\n        profileRefrence.child(\"Friends\").child(\"FriendsNumber\").child(firebaseUser.getUid()).child(\"Friends\").setValue(String.valueOf(j));\r\n\r\n        profileRefrence.child(\"Friends\").child(\"FriendsList\").child(id).child(firebaseUser.getUid()).setValue(data);\r\n        profileRefrence.child(\"Friends\").child(\"FriendsList\").child(firebaseUser.getUid()).child(id).setValue(data1);\r\n\r\n    }\r\n    private void deleteFriends(){\r\n        if(getApprciate()!=null){\r\n            j=Integer.valueOf(getApprciate());\r\n        }\r\n       FirebaseUser  firebaseUser=auth.getCurrentUser();\r\n        profileRefrence.child(\"Friends\").child(\"FriendsList\").child(id).child(firebaseUser.getUid()).removeValue() ;\r\n        profileRefrence.child(\"Friends\").child(\"FriendsList\").child(firebaseUser.getUid()).child(id).removeValue();\r\n\r\n\r\n    }\r\n    private void deleteFirendRequest() {\r\n\r\n        FirebaseUser  firebaseUser=auth.getCurrentUser();\r\n        profileRefrence.child(\"FriendsRequest\").child(firebaseUser.getUid()).child(id).removeValue();\r\n\r\n    }\r\n    private String getApprciate(){\r\n\r\n        Query query6 = FirebaseDatabase.getInstance().getReference().child(\"Profiles\").child(\"Friends\").child(\"FriendsNumber\")\r\n                .child(id);\r\n        query6.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                if(dataSnapshot!=null){\r\n                    if (dataSnapshot.exists() && dataSnapshot.getChildrenCount()>0&&dataSnapshot.getValue().toString().length()>0) {\r\n                        for (DataSnapshot snapshot : dataSnapshot.getChildren()) {\r\n\r\n                            appreciateNumber=dataSnapshot.child(\"Friends\").getValue(String.class);\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                }else {\r\n                    Toast.makeText(context, \"no data\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n        return appreciateNumber;\r\n\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Adapter/FriendRequestTabAdapter.java	(revision 142d181b0924cb6f42185432aeeb05d147df8a50)
+++ app/src/main/java/com/example/graduationproject/Adapter/FriendRequestTabAdapter.java	(date 1621643915959)
@@ -55,7 +55,7 @@
     }
 
     @Override
-    public void onBindViewHolder(@NonNull FriendRequestTabAdapterViewHolder holder, int position) {
+    public void onBindViewHolder(@NonNull FriendRequestTabAdapterViewHolder holder, final int position) {
         id =friendListDataList.get(position).getId();
         friendName=friendListDataList.get(position).getName();
         friendImage=friendListDataList.get(position).getUri();
@@ -66,7 +66,10 @@
             public void onClick(View view) {
                 addFriends();
                 deleteFirendRequest();
-
+                friendListDataList.remove(position);
+                notifyItemRemoved(position);
+                notifyItemRangeRemoved(position, getItemCount());
+                Toast.makeText(context, "accepted", Toast.LENGTH_SHORT).show();
             }
         });
         holder.cancel.setOnClickListener(new View.OnClickListener() {
@@ -74,6 +77,10 @@
             public void onClick(View view) {
                 deleteFriends();
                 deleteFirendRequest();
+                friendListDataList.remove(position);
+                notifyItemRemoved(position);
+                notifyItemRangeRemoved(position, getItemCount());
+                Toast.makeText(context, "delete", Toast.LENGTH_SHORT).show();
             }
         });
 
Index: app/src/main/java/com/example/graduationproject/Notification/Data.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Notification/Data.java	(date 1621636069511)
+++ app/src/main/java/com/example/graduationproject/Notification/Data.java	(date 1621636069511)
@@ -0,0 +1,29 @@
+package com.example.graduationproject.Notification;
+
+public class Data {
+    private String Title, message;
+
+    public Data(String title, String message) {
+        this.Title = title;
+        this.message = message;
+    }
+
+    public Data() {
+    }
+
+    public String getTitle() {  
+        return Title;
+    }
+
+    public void setTitle(String title) {
+        this.Title = title;
+    }
+
+    public String getMessages() {
+        return message;
+    }
+
+    public void setMessages(String messages) {
+        this.message = messages;
+    }
+}
Index: app/src/main/java/com/example/graduationproject/Notification/Client.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Notification/Client.java	(date 1621636069567)
+++ app/src/main/java/com/example/graduationproject/Notification/Client.java	(date 1621636069567)
@@ -0,0 +1,14 @@
+package com.example.graduationproject.Notification;
+
+import retrofit2.Retrofit;
+import retrofit2.converter.gson.GsonConverterFactory;
+
+public class Client {
+    private static Retrofit retrofit=null;
+    public static Retrofit getClient(String url){
+        if (retrofit==null){
+            retrofit = new  Retrofit.Builder().baseUrl(url).addConverterFactory(GsonConverterFactory.create()).build();
+        }
+        return retrofit;
+    }
+}
Index: app/src/main/java/com/example/graduationproject/Notification/MyResponse.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Notification/MyResponse.java	(date 1621636069539)
+++ app/src/main/java/com/example/graduationproject/Notification/MyResponse.java	(date 1621636069539)
@@ -0,0 +1,5 @@
+package com.example.graduationproject.Notification;
+
+public class MyResponse {
+    public int success;
+}
Index: app/src/main/java/com/example/graduationproject/Notification/NotificationSender.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Notification/NotificationSender.java	(date 1621636069606)
+++ app/src/main/java/com/example/graduationproject/Notification/NotificationSender.java	(date 1621636069606)
@@ -0,0 +1,14 @@
+package com.example.graduationproject.Notification;
+
+public class NotificationSender {
+    public Data data;
+    public String to;
+
+    public NotificationSender(Data data, String to) {
+        this.data = data;
+        this.to = to;
+    }
+
+    public NotificationSender() {
+    }
+}
Index: app/src/main/java/com/example/graduationproject/Activities/SendNotif.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/graduationproject/Activities/SendNotif.java	(date 1621636069585)
+++ app/src/main/java/com/example/graduationproject/Activities/SendNotif.java	(date 1621636069585)
@@ -0,0 +1,96 @@
+package com.example.graduationproject.Activities;
+
+import androidx.annotation.NonNull;
+import androidx.appcompat.app.AppCompatActivity;
+
+import android.os.Bundle;
+import android.util.Log;
+import android.view.View;
+import android.widget.Button;
+import android.widget.EditText;
+import android.widget.Toast;
+
+import com.example.graduationproject.Notification.APIService;
+import com.example.graduationproject.Notification.Client;
+import com.example.graduationproject.Notification.Data;
+import com.example.graduationproject.Notification.MyResponse;
+import com.example.graduationproject.Notification.NotificationSender;
+import com.example.graduationproject.Notification.Token;
+import com.example.graduationproject.R;
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.auth.FirebaseUser;
+import com.google.firebase.database.DataSnapshot;
+import com.google.firebase.database.DatabaseError;
+import com.google.firebase.database.FirebaseDatabase;
+import com.google.firebase.database.ValueEventListener;
+import com.google.firebase.iid.FirebaseInstanceId;
+
+import retrofit2.Call;
+import retrofit2.Callback;
+import retrofit2.Response;
+
+public class SendNotif extends AppCompatActivity {
+    EditText UserTB,Title,Message;
+    Button send;
+    private APIService apiService;
+
+    @Override
+    protected void onCreate(Bundle savedInstanceState) {
+        super.onCreate(savedInstanceState);
+        setContentView(R.layout.activity_send_notif);
+        UserTB=findViewById(R.id.UserID);
+        Title=findViewById(R.id.Title);
+        Message=findViewById(R.id.Messages);
+        send=findViewById(R.id.button2);
+        apiService= Client.getClient("https://fcm.googleapis.com/").create(APIService.class);
+        send.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View view) {
+                FirebaseDatabase.getInstance().getReference().child("Tokens").child(UserTB.getText().toString().trim()).child("token")
+                        .addListenerForSingleValueEvent(new ValueEventListener() {
+                            @Override
+                            public void onDataChange(@NonNull DataSnapshot snapshot) {
+                                String userToken=snapshot.getValue(String.class);
+                                sendNotifications(userToken,Title.getText().toString().trim(),Message.getText().toString().trim());
+                                Log.i("TAG", "onDataChange: ");
+                            }
+
+                            @Override
+                            public void onCancelled(@NonNull DatabaseError error) {
+
+                            }
+                        });
+
+            }
+        });
+        UpdateToken();
+    }
+    private void UpdateToken() {
+        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
+        String refreshToken= FirebaseInstanceId.getInstance().getToken();
+        Token token =new Token(refreshToken);
+        FirebaseDatabase.getInstance().getReference("Tokens").child(FirebaseAuth.getInstance().getCurrentUser().getUid()).setValue(token);
+    }
+    private void sendNotifications(String userToken, String title, String message) {
+        Data data =new Data(title,message);
+        NotificationSender notificationSender = new NotificationSender(data,userToken);
+        Log.i("TAG", "sendNotifications: ");
+        apiService.sendNotification(notificationSender).enqueue(new Callback<MyResponse>()
+        {
+            @Override
+            public void onResponse(Call<MyResponse> call, Response<MyResponse> response) {
+                if (response.code()==200){
+                    if (response.body().success!=1){
+                        Toast.makeText(getApplicationContext(), "Failed", Toast.LENGTH_LONG).show();
+                    }
+                }
+            }
+
+            @Override
+            public void onFailure(Call<MyResponse> call, Throwable t) {
+
+            }
+        });
+    }
+
+}
\ No newline at end of file
